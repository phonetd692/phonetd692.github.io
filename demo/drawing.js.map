{"version":3,"file":"drawing.js","sources":["../../node_modules/lib0/component.js","../../demo/drawing.js"],"sourcesContent":["/* eslint-env browser */\n\n/**\n * Web components.\n *\n * @module component\n */\n\nimport * as dom from './dom.js'\nimport * as diff from './diff.js'\nimport * as object from './object.js'\nimport * as json from './json.js'\nimport * as string from './string.js'\nimport * as array from './array.js'\nimport * as number from './number.js'\nimport * as func from './function.js'\n\n/**\n * @type {CustomElementRegistry}\n */\nexport const registry = customElements\n\n/**\n * @param {string} name\n * @param {any} constr\n * @param {ElementDefinitionOptions} [opts]\n */\nexport const define = (name, constr, opts) => registry.define(name, constr, opts)\n\n/**\n * @param {string} name\n * @return {Promise<CustomElementConstructor>}\n */\nexport const whenDefined = name => registry.whenDefined(name)\n\nconst upgradedEventName = 'upgraded'\nconst connectedEventName = 'connected'\nconst disconnectedEventName = 'disconnected'\n\n/**\n * @template S\n */\nexport class Lib0Component extends HTMLElement {\n  /**\n   * @param {S} [state]\n   */\n  constructor (state) {\n    super()\n    /**\n     * @type {S|null}\n     */\n    this.state = /** @type {any} */ (state)\n    /**\n     * @type {any}\n     */\n    this._internal = {}\n  }\n\n  /**\n   * @param {S} _state\n   * @param {boolean} [_forceStateUpdate] Force that the state is rerendered even if state didn't change\n   */\n  setState (_state, _forceStateUpdate = true) {}\n\n  /**\n    * @param {any} _stateUpdate\n    */\n  updateState (_stateUpdate) { }\n}\n\n/**\n * @param {any} val\n * @param {\"json\"|\"string\"|\"number\"} type\n * @return {string}\n */\nconst encodeAttrVal = (val, type) => {\n  if (type === 'json') {\n    val = json.stringify(val)\n  }\n  return val + ''\n}\n\n/**\n * @param {any} val\n * @param {\"json\"|\"string\"|\"number\"|\"bool\"} type\n * @return {any}\n */\nconst parseAttrVal = (val, type) => {\n  switch (type) {\n    case 'json':\n      return json.parse(val)\n    case 'number':\n      return Number.parseFloat(val)\n    case 'string':\n      return val\n    case 'bool':\n      return val != null\n    default:\n      return null\n  }\n}\n\n/**\n * @typedef {Object} CONF\n * @property {string?} [CONF.template] Template for the shadow dom.\n * @property {string} [CONF.style] shadow dom style. Is only used when\n * `CONF.template` is defined\n * @property {S} [CONF.state] Initial component state.\n * @property {function(S,S|null,Lib0Component<S>):void} [CONF.onStateChange] Called when\n * the state changes.\n * @property {Object<string,function(any, any):Object>} [CONF.childStates] maps from\n * CSS-selector to transformer function. The first element that matches the\n * CSS-selector receives state updates via the transformer function.\n * @property {Object<string,\"json\"|\"number\"|\"string\"|\"bool\">} [CONF.attrs]\n * attrs-keys and state-keys should be camelCase, but the DOM uses kebap-case. I.e.\n * `attrs = { myAttr: 4 }` is represeted as `<my-elem my-attr=\"4\" />` in the DOM\n * @property {Object<string, function(CustomEvent, Lib0Component<any>):boolean|void>} [CONF.listeners] Maps from dom-event-name\n * to event listener.\n * @property {function(S, S, Lib0Component<S>):Object<string,string>} [CONF.slots] Fill slots\n * automatically when state changes. Maps from slot-name to slot-html.\n * @template S\n */\n\n/**\n * @template T\n * @param {string} name\n * @param {CONF<T>} cnf\n * @return {typeof Lib0Component}\n */\nexport const createComponent = (name, { template, style = '', state: defaultState, onStateChange = () => {}, childStates = { }, attrs = {}, listeners = {}, slots = () => ({}) }) => {\n  /**\n   * Maps from camelCase attribute name to kebap-case attribute name.\n   * @type {Object<string,string>}\n   */\n  const normalizedAttrs = {}\n  for (const key in attrs) {\n    normalizedAttrs[string.fromCamelCase(key, '-')] = key\n  }\n  const templateElement = template\n    ? /** @type {HTMLTemplateElement} */ (dom.parseElement(`\n      <template>\n        <style>${style}</style>\n        ${template}\n      </template>\n      `))\n    : null\n\n  class _Lib0Component extends HTMLElement {\n    /**\n     * @param {T} [state]\n     */\n    constructor (state) {\n      super()\n      /**\n       * @type {Array<{d:Lib0Component<T>, s:function(any, any):Object}>}\n       */\n      this._childStates = []\n      /**\n       * @type {Object<string,string>}\n       */\n      this._slots = {}\n      this._init = false\n      /**\n       * @type {any}\n       */\n      this._internal = {}\n      /**\n       * @type {any}\n       */\n      this.state = state || null\n      this.connected = false\n      // init shadow dom\n      if (templateElement) {\n        const shadow = /** @type {ShadowRoot} */ (this.attachShadow({ mode: 'open' }))\n        shadow.appendChild(templateElement.content.cloneNode(true))\n        // fill child states\n        for (const key in childStates) {\n          this._childStates.push({\n            d: /** @type {Lib0Component<T>} */ (dom.querySelector(/** @type {any} */ (shadow), key)),\n            s: childStates[key]\n          })\n        }\n      }\n      dom.emitCustomEvent(this, upgradedEventName, { bubbles: true })\n    }\n\n    connectedCallback () {\n      this.connected = true\n      if (!this._init) {\n        this._init = true\n        const shadow = this.shadowRoot\n        if (shadow) {\n          dom.addEventListener(shadow, upgradedEventName, event => {\n            this.setState(this.state, true)\n            event.stopPropagation()\n          })\n        }\n        /**\n         * @type {Object<string, any>}\n         */\n        const startState = this.state || object.assign({}, defaultState)\n        if (attrs) {\n          for (const key in attrs) {\n            const normalizedKey = string.fromCamelCase(key, '-')\n            const val = parseAttrVal(this.getAttribute(normalizedKey), attrs[key])\n            if (val) {\n              startState[key] = val\n            }\n          }\n        }\n        // add event listeners\n        for (const key in listeners) {\n          dom.addEventListener(shadow || this, key, event => {\n            if (listeners[key](/** @type {CustomEvent} */ (event), this) !== false) {\n              event.stopPropagation()\n              event.preventDefault()\n              return false\n            }\n          })\n        }\n        // first setState call\n        this.state = null\n        this.setState(startState)\n      }\n      dom.emitCustomEvent(/** @type {any} */ (this.shadowRoot || this), connectedEventName, { bubbles: true })\n    }\n\n    disconnectedCallback () {\n      this.connected = false\n      dom.emitCustomEvent(/** @type {any} */ (this.shadowRoot || this), disconnectedEventName, { bubbles: true })\n      this.setState(null)\n    }\n\n    static get observedAttributes () {\n      return object.keys(normalizedAttrs)\n    }\n\n    /**\n     * @param {string} name\n     * @param {string} oldVal\n     * @param {string} newVal\n     *\n     * @private\n     */\n    attributeChangedCallback (name, oldVal, newVal) {\n      const curState = /** @type {any} */ (this.state)\n      const camelAttrName = normalizedAttrs[name]\n      const type = attrs[camelAttrName]\n      const parsedVal = parseAttrVal(newVal, type)\n      if (curState && (type !== 'json' || json.stringify(curState[camelAttrName]) !== newVal) && curState[camelAttrName] !== parsedVal && !number.isNaN(parsedVal)) {\n        this.updateState({ [camelAttrName]: parsedVal })\n      }\n    }\n\n    /**\n     * @param {any} stateUpdate\n     */\n    updateState (stateUpdate) {\n      this.setState(object.assign({}, this.state, stateUpdate))\n    }\n\n    /**\n     * @param {any} state\n     */\n    setState (state, forceStateUpdates = false) {\n      const prevState = this.state\n      this.state = state\n      if (this._init && (!func.equalityFlat(state, prevState) || forceStateUpdates)) {\n        // fill slots\n        if (state) {\n          const slotElems = slots(state, prevState, this)\n          for (const key in slotElems) {\n            const slotContent = slotElems[key]\n            if (this._slots[key] !== slotContent) {\n              this._slots[key] = slotContent\n              const currentSlots = /** @type {Array<any>} */ (key !== 'default' ? array.from(dom.querySelectorAll(this, `[slot=\"${key}\"]`)) : array.from(this.childNodes).filter(/** @param {any} child */ child => !dom.checkNodeType(child, dom.ELEMENT_NODE) || !child.hasAttribute('slot')))\n              currentSlots.slice(1).map(dom.remove)\n              const nextSlot = dom.parseFragment(slotContent)\n              if (key !== 'default') {\n                array.from(nextSlot.children).forEach(c => c.setAttribute('slot', key))\n              }\n              if (currentSlots.length > 0) {\n                dom.replaceWith(currentSlots[0], nextSlot)\n              } else {\n                dom.appendChild(this, nextSlot)\n              }\n            }\n          }\n        }\n        onStateChange(state, prevState, this)\n        if (state != null) {\n          this._childStates.forEach(cnf => {\n            const d = cnf.d\n            if (d.updateState) {\n              d.updateState(cnf.s(state, this))\n            }\n          })\n        }\n        for (const key in attrs) {\n          const normalizedKey = string.fromCamelCase(key, '-')\n          if (state == null) {\n            this.removeAttribute(normalizedKey)\n          } else {\n            const stateVal = state[key]\n            const attrsType = attrs[key]\n            if (!prevState || prevState[key] !== stateVal) {\n              if (attrsType === 'bool') {\n                if (stateVal) {\n                  this.setAttribute(normalizedKey, '')\n                } else {\n                  this.removeAttribute(normalizedKey)\n                }\n              } else if (stateVal == null && (attrsType === 'string' || attrsType === 'number')) {\n                this.removeAttribute(normalizedKey)\n              } else {\n                this.setAttribute(normalizedKey, encodeAttrVal(stateVal, attrsType))\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  define(name, _Lib0Component)\n  // @ts-ignore\n  return _Lib0Component\n}\n\n/**\n * @param {function} definer function that defines a component when executed\n */\nexport const createComponentDefiner = definer => {\n  /**\n   * @type {any}\n   */\n  let defined = null\n  return () => {\n    if (!defined) {\n      defined = definer()\n    }\n    return defined\n  }\n}\n\nexport const defineListComponent = createComponentDefiner(() => {\n  const ListItem = createComponent('lib0-list-item', {\n    template: '<slot name=\"content\"></slot>',\n    slots: state => ({\n      content: `<div>${state}</div>`\n    })\n  })\n  return createComponent('lib0-list', {\n    state: { list: /** @type {Array<string>} */ ([]), Item: ListItem },\n    onStateChange: (state, prevState, component) => {\n      if (state == null) {\n        return\n      }\n      const { list = /** @type {Array<any>} */ ([]), Item = ListItem } = state\n      // @todo deep compare here by providing another parameter to simpleDiffArray\n      let { index, remove, insert } = diff.simpleDiffArray(prevState ? prevState.list : [], list, func.equalityFlat)\n      if (remove === 0 && insert.length === 0) {\n        return\n      }\n      let child = /** @type {Lib0Component<any>} */ (component.firstChild)\n      while (index-- > 0) {\n        child = /** @type {Lib0Component<any>} */ (child.nextElementSibling)\n      }\n      let insertStart = 0\n      while (insertStart < insert.length && remove-- > 0) {\n        // update existing state\n        child.setState(insert[insertStart++])\n        child = /** @type {Lib0Component<any>} */ (child.nextElementSibling)\n      }\n      while (remove-- > 0) {\n        // remove remaining\n        const prevChild = child\n        child = /** @type {Lib0Component<any>} */ (child.nextElementSibling)\n        component.removeChild(prevChild)\n      }\n      // insert remaining\n      component.insertBefore(dom.fragment(insert.slice(insertStart).map(insState => {\n        const el = new Item()\n        el.setState(insState)\n        return el\n      })), child)\n    }\n  })\n})\n\nexport const defineLazyLoadingComponent = createComponentDefiner(() => createComponent('lib0-lazy', {\n  state: /** @type {{component:null|String,import:null|function():Promise<any>,state:null|object}} */ ({\n    component: null, import: null, state: null\n  }),\n  attrs: {\n    component: 'string'\n  },\n  onStateChange: ({ component, state, import: getImport }, prevState, componentEl) => {\n    if (component !== null) {\n      if (getImport) {\n        getImport()\n      }\n      if (!prevState || component !== prevState.component) {\n        const el = /** @type {any} */ (dom.createElement(component))\n        componentEl.innerHTML = ''\n        componentEl.insertBefore(el, null)\n      }\n      const el = /** @type {any} */ (componentEl.firstElementChild)\n      // @todo generalize setting state and check if setState is defined\n      if (el.setState) {\n        el.setState(state)\n      }\n    }\n  }\n}))\n","import * as component from 'lib0/component.js'\nimport * as Y from 'yjs' // eslint-disable-line\nimport * as shared from './sharedTypes.js'\nimport * as dom from 'lib0/dom.js'\n\n/**\n * @typedef {object} Coordinate\n * @property {number} Coordinate.x\n * @property {number} Coordinate.y\n */\n\nconst calculateCoordinateFromEvent = (event, el) => {\n  const canvasRect = /** @type {HTMLElement} */ (dom.querySelector(el.shadowRoot, 'canvas')).getBoundingClientRect()\n  return { x: (event.clientX - canvasRect.left) / canvasRect.width, y: (event.clientY - canvasRect.top) / canvasRect.height }\n}\n\nconst drawStart = (coord, el) => {\n  if (coord.target == null || coord.target.nodeName === 'CANVAS') {\n    const drawElement = new Y.Map()\n    drawElement.set('color', el._internal.currentColor)\n    drawElement.set('type', 'path')\n    drawElement.set('coordinate', calculateCoordinateFromEvent(coord, el))\n    el._internal.currPath = new Y.Array()\n    drawElement.set('path', el._internal.currPath)\n    shared.drawingContent.push([drawElement])\n  }\n  return false\n}\n\nconst clearCurrPath = (event, el) => {\n  el._internal.currPath = null\n  return false\n}\n\nconst moveDraw = (coord, el) => {\n  if (coord.target == null || coord.target.nodeName === 'CANVAS') {\n    if (el._internal.currPath !== null) {\n      el._internal.currPath.push([calculateCoordinateFromEvent(coord, el)])\n    }\n  }\n  return false\n}\n\ncomponent.createComponent('y-demo-drawing', {\n  template: `\n  <input id=\"drawing-menubar-checkbox\" type=\"checkbox\">\n  <div id=\"drawing-menubar\">\n    <div id=\"drawing-menubar-action-close\">\n      <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 352 512\"><path d=\"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z\"/></svg>\n    </div>\n    <div id=\"drawing-menubar-action-color\">\n      <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><path d=\"M204.3 5C104.9 24.4 24.8 104.3 5.2 203.4c-37 187 131.7 326.4 258.8 306.7 41.2-6.4 61.4-54.6 42.5-91.7-23.1-45.4 9.9-98.4 60.9-98.4h79.7c35.8 0 64.8-29.6 64.9-65.3C511.5 97.1 368.1-26.9 204.3 5zM96 320c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm32-128c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128-64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z\"/></svg>\n    </div>\n    <div id=\"drawing-menubar-action-clear\">\n      <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\"><path d=\"M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z\"/></svg>\n    </div>\n  </div>\n  <div id=\"drawing-menubar-colors\">\n    <div id=\"drawer-menubar-colors-black\"></div>\n    <div id=\"drawer-menubar-colors-orange\"></div>\n    <div id=\"drawer-menubar-colors-blue\"></div>\n    <div id=\"drawer-menubar-colors-green\"></div>\n  </div>\n  <canvas width=\"2000\" height=\"2000\"></canvas>\n  `,\n  listeners: {\n    mousedown: drawStart,\n    /**\n     * @param {any} event\n     */\n    touchstart: (event, el) => {\n      if (event.touches.length === 1) {\n        drawStart(event.touches[0], el)\n      }\n      return false\n    },\n    mouseleave: clearCurrPath,\n    mouseup: clearCurrPath,\n    touchcancel: clearCurrPath,\n    touchend: clearCurrPath,\n    mousemove: moveDraw,\n    /**\n     * @param {any} event\n     * @param {any} el\n     */\n    touchmove: (event, el) => {\n      if (event.touches.length === 1) {\n        moveDraw(event.touches[0], el)\n      }\n      return false\n    }\n  },\n  onStateChange: (state, prevState, el) => {\n    const shadow = /** @type {any} */ (el.shadowRoot)\n    const drawingCanvas = /** @type {HTMLCanvasElement} */ (dom.querySelector(shadow, 'canvas'))\n    const drawingMenubarCheckbox = /** @type {HTMLInputElement} */ (dom.querySelector(shadow, '#drawing-menubar-checkbox'))\n    const drawingMenubarColors = dom.querySelector(shadow, '#drawing-menu-colors')\n    const drawingMenubarActionColor = /** @type {HTMLElement} */ (dom.querySelector(shadow, '#drawing-menubar-action-color'))\n    const drawingMenubarActionClear = /** @type {HTMLElement} */ (dom.querySelector(shadow, '#drawing-menubar-action-clear'))\n\n    // clear all existing state\n    el._internal.currPath = null\n    el._internal.currentColor = '#333'\n    if (el._internal.unregisterYDraw) {\n      el._internal.unregisterYDraw\n    }\n    if (el._internal.unregister) {\n      el._internal.unregister()\n    }\n    if (state) {\n      // draw state\n      const ctx = /** @type {CanvasRenderingContext2D} */ (drawingCanvas.getContext('2d'))\n      const yDrawingContent = shared.drawingContent\n\n      const requestAnimationFrame = window.requestAnimationFrame || setTimeout\n\n      let needToRedraw = true\n\n      /**\n       * Draw the canvas\n       */\n      const draw = () => {\n        if (needToRedraw) {\n          needToRedraw = false\n          ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height)\n          const width = ctx.canvas.width\n          const height = ctx.canvas.height\n          yDrawingContent.forEach(drawElement => {\n            if (drawElement.get('type') === 'path') {\n              const coordinate = /** @type {Coordinate} */ (drawElement.get('coordinate'))\n              const color = /** @type {string} */ (drawElement.get('color'))\n              const path = /** @type {Y.Array<Coordinate>} */ (drawElement.get('path'))\n              if (path) {\n                ctx.beginPath()\n                ctx.lineWidth = 5\n                ctx.lineJoin = ctx.lineCap = 'round'\n                ctx.shadowBlur = 2\n                ctx.shadowColor = color\n                ctx.beginPath()\n                ctx.moveTo(coordinate.x * width, coordinate.y * height)\n                ctx.strokeStyle = color\n                let lastPoint = coordinate\n                path.forEach(c => {\n                  // @todo this can be optimized by considering the previous coordinates too\n                  const pointBetween = {\n                    x: (c.x + lastPoint.x) / 2,\n                    y: (c.y + lastPoint.y) / 2\n                  }\n                  ctx.quadraticCurveTo(lastPoint.x * width, lastPoint.y * height, pointBetween.x * width, pointBetween.y * height)\n                  lastPoint = c\n                })\n                ctx.lineTo(lastPoint.x * width, lastPoint.y * height)\n                ctx.stroke()\n              }\n            }\n          })\n        }\n      }\n      const requestDrawAnimationFrame = () => {\n        needToRedraw = true\n        requestAnimationFrame(draw)\n      }\n      yDrawingContent.observeDeep(requestDrawAnimationFrame)\n      el._internal.unregisterYDraw = () => yDrawingContent.unobserveDeep(requestDrawAnimationFrame)\n      requestDrawAnimationFrame()\n\n      /**\n       * @param {string} color\n       */\n      const createColorChanger = color => () => {\n        drawingMenubarActionColor.style.backgroundColor = color\n        el._internal.currentColor = color\n      }\n\n      const cBlack = createColorChanger('#333')\n      const cOrange = createColorChanger('#ffbc42')\n      const cBlue = createColorChanger('#30bced')\n      const cGreen = createColorChanger('#6eeb83')\n      const cClear = () => {\n        yDrawingContent.delete(0, yDrawingContent.length)\n        drawingMenubarCheckbox.checked = false\n      }\n\n      const menuBlack = /** @type {HTMLElement} */ (dom.querySelector(shadow, '#drawer-menubar-colors-black'))\n      const menuOrange = /** @type {HTMLElement} */ (dom.querySelector(shadow, '#drawer-menubar-colors-orange'))\n      const menuBlue = /** @type {HTMLElement} */ (dom.querySelector(shadow, '#drawer-menubar-colors-blue'))\n      const menuGreen = /** @type {HTMLElement} */ (dom.querySelector(shadow, '#drawer-menubar-colors-green'))\n\n      menuBlack.addEventListener('click', cBlack)\n      menuOrange.addEventListener('click', cOrange)\n      menuBlue.addEventListener('click', cBlue)\n      menuGreen.addEventListener('click', cGreen)\n      drawingMenubarActionClear.addEventListener('click', cClear)\n\n      if (el._internal.unregister) {\n        el._internal.unregister()\n      }\n      el._internal.unregister = () => {\n        menuBlack.removeEventListener('click', cBlack)\n        menuOrange.removeEventListener('click', cOrange)\n        menuBlue.removeEventListener('click', cBlue)\n        menuGreen.removeEventListener('click', cGreen)\n        drawingMenubarActionClear.removeEventListener('click', cClear)\n      }\n    }\n  },\n  style: `\n  :host {\n    position: relative;\n    display: block;\n    touch-action: none;\n  }\n\n  canvas {\n    width: 100%;\n    background-image: -webkit-repeating-radial-gradient(center center, rgba(0,0,0,.2), rgba(0,0,0,.2) 1px, transparent 1px, transparent 100%);\n    background-size: 1rem 1rem;\n  }\n  \n  #drawing-area {\n    position: relative;\n  }\n  \n  #drawing-menubar-checkbox {\n    position: absolute;\n    right: .5rem;\n    top: .5rem;\n    width: var(--drawing-menubar-icon-size);\n    height: var(--drawing-menubar-icon-size);\n    cursor: pointer;\n    opacity: 0;\n    z-index: 3;\n  }\n  \n  #drawing-menubar {\n    position: absolute;\n    right: .5rem;\n    top: .5rem;\n    width: var(--drawing-menubar-icon-size);\n    height: var(--drawing-menubar-icon-size);;\n    /* padding-top: calc(var(--drawing-menubar-icon-size) - .6rem);*/\n    background-color: var(--theme-highlight);\n    overflow: hidden;\n    border-radius: 50%;\n    border: .3rem solid var(--theme-highlight);\n    box-shadow: inset 0 0 0 .1rem var(--background-color);\n    box-sizing: border-box;\n    transition: box-shadow .5s, height .5s, border .2s, border-radius .5s, background-color .2s;\n  }\n  \n  #drawing-menubar-checkbox:checked ~ #drawing-menubar {\n    height: calc(3 * var(--drawing-menubar-icon-size));\n    box-shadow: inset 0 0 0 0 var(--theme-highlight);\n    border-radius: .3rem;\n    border: 0 solid var(--theme-yellow);\n    background-color: var(--theme-highlight-complementary);\n  }\n  \n  #drawing-menubar > div {\n    height: var(--drawing-menubar-icon-size);\n    width: var(--drawing-menubar-icon-size);\n    cursor: pointer;\n    display: flex;\n    transition: background-color .1s;\n  }\n  \n  #drawing-menubar-action-close svg {\n    opacity: 0;\n  }\n  \n  #drawing-menubar-checkbox:checked ~ #drawing-menubar > #drawing-menubar-action-close svg {\n    opacity: 1;\n    transform: rotate(90deg);\n    transition: opacity .5s, transform .5s;\n    transition-delay: .2s;\n  }\n  \n  #drawing-menubar-action-color {\n    background-color: var(--theme-blue)\n  }\n  \n  #drawing-menubar-action-clear {\n    background-color: var(--theme-highlight-light)\n  }\n  \n  #drawing-menubar svg {\n    fill: var(--background-color);\n    margin: auto;\n    height: 2rem;\n  }\n  \n  #drawing-menubar-checkbox:not(:checked) ~ #drawing-menubar > div:not(:first-child) {\n    background-color: var(--theme-highlight) !important;\n    transition: background-color .2s;\n  }\n  \n  #drawing-menubar-colors {\n    position: absolute;\n    top: calc(1.41 * var(--drawing-menubar-icon-size));\n    right: calc(1.3 * var(--drawing-menubar-icon-size));\n    display: flex;\n    justify-content: space-between;\n    width: 0;\n  }\n  \n  #drawing-menubar-colors > div {\n    border-radius: 50%;\n    width: 1.9rem;\n    height: 1.9rem;\n    box-sizing: border-box;\n    cursor: pointer;\n  }\n  \n  #drawing-menubar-colors > div:hover {\n    transform: scale(1.2);\n    transition: all .2s;\n  }\n  \n  #drawing-menubar-checkbox:checked ~ #drawing-menubar-colors {\n    width: 10rem;\n    transition: width .5s;\n    transition-delay: .7s;\n  }\n  \n  #drawer-menubar-colors-black {\n    background-color: #333;\n  }\n  #drawer-menubar-colors-orange {\n    background-color: var(--theme-orange);\n  }\n  #drawer-menubar-colors-blue {\n    background-color: var(--theme-blue);\n  }\n  #drawer-menubar-colors-green {\n    background-color: var(--theme-green);\n  }  \n  `\n})"],"names":["json.stringify","json.parse","string.fromCamelCase","dom.parseElement","dom.querySelector","dom.emitCustomEvent","dom.addEventListener","object.assign","object.keys","number.isNaN","func.equalityFlat","array.from","dom.querySelectorAll","dom.checkNodeType","dom.ELEMENT_NODE","dom.remove","dom.parseFragment","dom.replaceWith","dom.appendChild","Y.Map","Y.Array","shared.drawingContent","component.createComponent"],"mappings":"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,CAAC,gBAAgB,CAAC,OAAO,EAAE,OAAO,EAAC;AACnD,MAAM,QAAQ,CAAC,gBAAgB,CAAC,OAAO,EAAE,KAAK,EAAC;AAC/C,MAAM,SAAS,CAAC,gBAAgB,CAAC,OAAO,EAAE,MAAM,EAAC;AACjD,MAAM,yBAAyB,CAAC,gBAAgB,CAAC,OAAO,EAAE,MAAM,EAAC;AACjE;AACA,MAAM,IAAI,EAAE,CAAC,SAAS,CAAC,UAAU,EAAE;AACnC,QAAQ,EAAE,CAAC,SAAS,CAAC,UAAU,GAAE;AACjC,OAAO;AACP,MAAM,EAAE,CAAC,SAAS,CAAC,UAAU,GAAG,MAAM;AACtC,QAAQ,SAAS,CAAC,mBAAmB,CAAC,OAAO,EAAE,MAAM,EAAC;AACtD,QAAQ,UAAU,CAAC,mBAAmB,CAAC,OAAO,EAAE,OAAO,EAAC;AACxD,QAAQ,QAAQ,CAAC,mBAAmB,CAAC,OAAO,EAAE,KAAK,EAAC;AACpD,QAAQ,SAAS,CAAC,mBAAmB,CAAC,OAAO,EAAE,MAAM,EAAC;AACtD,QAAQ,yBAAyB,CAAC,mBAAmB,CAAC,OAAO,EAAE,MAAM,EAAC;AACtE,QAAO;AACP,KAAK;AACL,GAAG;AACH,EAAE,KAAK,EAAE,CAAC;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,CAAC;AACH,CAAC"}